{% extends "layouts/html.twig" %}

{% block title %}
    Accueil
{% endblock %}
{% block body %}

    <section id="allDisasters">

        {% for disaster in disasters %}

            <div class="section">
                <h5 class="center-align" style="text-decoration: underline;"><b>{{ disaster.name }}</b></h5>

                <div class="row">
                    <div class="col s6">
                        <div class="card">
                            <div class="card-image">
                                <div class="row">
                                    <div class="col s8">
                                        <h2 style="margin-left: 2%;">
                                            <i class="icon icon-globe"></i> {{ disaster.location }}
                                            <small>{{ disaster.date }}</small>
                                        </h2>
                                    </div>
                                    <div class="col s4">
                                        Test
                                    </div>
                                </div>

                                <img src="assets/images/tsunami.jpg"/>
                            </div>
                            <div class="card-content">
                                Small text
                            </div>
                        </div>
                    </div>
                    <div class="col s6">
                        <div id="chart_{{ disaster.id }}"
                             style="border:black solid 1px; width: 100%;height:250px;"></div>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s2">
                        <i class="icon-eur material-icons prefix"></i>
                        <input value="" id="don_{{ disaster.id }}" type="text" class="validate">
                        <label class="active" for="don">Don</label>
                    </div>

                </div>
            </div>

            <div class="divider"></div>

        {% endfor %}

    </section>
{% endblock %}

{% block js %}
    <script>
        $(function () {
            var chart;

            {%  for disas in disasters %}
            chart = new Highcharts.Chart({
                chart: {
                    renderTo: 'chart_{{ disas.id }}',
                    type: 'pie'
                },
                title: {
                    "text": ""
                },
                plotOptions: {
                    pie: {
                        innerSize: '60%'
                    }
                },
                series: [{
                    data: [
                        ['Accompli', 20.0],
                        ['Non accompli', 80.0]
                    ]
                }]
            });
            {%  endfor %}

        });
    </script>

{% endblock %}